# TwinPixel.nl — Astro + Tailwind + Decap CMS

High‑end, minimal, and fast website for TwinPixel (NL primary, EN prepared).

Tech: Astro (SSG), Tailwind v4 (via @tailwindcss/vite), Decap CMS (GitHub backend), zero/low‑JS pages.

Live structure (NL):
- /nl/ — Home
- /nl/diensten/
- /nl/prijzen/
- /nl/portfolio/
- /nl/portfolio/[slug]/
- /nl/blog/
- /nl/blog/[slug]/
- /nl/over/
- /nl/contact/
- /admin/ — Decap CMS

EN prepared (noindex until launch):
- /en/

Root:
- / — gateway with links to /nl/ and /en/, x‑default hreflang set.

Key targets
- CWV: LCP < 1.5s, CLS < 0.03, TBT < 100ms
- Lighthouse: Mobile ≥ 95, Desktop ≥ 98
- Initial JS ≤ 50KB on static pages
- Accessibility: WCAG AA contrasts, visible focus, keyboard navigation


## 1) Getting Started

Requirements
- Node 18+ recommended

Install and run
- npm install
- npm run dev
- Open http://localhost:4321/

Build
- npm run build
- npm run preview

Environment variables
- Copy `.env.example` to `.env` and set GA4 when ready:
  - PUBLIC_GA4_ID=G-XXXXXXXXXX
  - Leave empty to disable tracking. GA code only injects when a non‑empty PUBLIC_GA4_ID is present.


## 2) Project Structure

- astro.config.mjs
  - site: https://www.twinpixel.nl
  - trailingSlash: 'always' (URLs end with /)
  - @astrojs/sitemap with filter to exclude /en/ until EN launch
  - Tailwind integration via @tailwindcss/vite

- public/
  - uploads/ (Decap media)
  - admin/ (Decap CMS entry page)
  - robots.txt (Disallow: /admin/)
  - _redirects (Netlify redirects for legacy .html)
  - favicon.svg

- vercel.json
  - Trailing slash ON
  - Redirects .html → NL routes
  - X‑Robots‑Tag: noindex for /admin/*

- src/styles/tailwind.css
  - Tailwind v4 entry + theme tokens and utilities
  - Reduced‑motion respect
  - Base minimal theme (dark)

- src/layouts/BaseLayout.astro
  - SEO: title, description, canonical, OG meta
  - hreflang: nl‑NL and en‑GB alternates, x‑default toggle
  - GA4 (pageview only, IP anonymization) via PUBLIC_GA4_ID
  - Sticky header, single primary CTA, accessible skip‑link

- src/content/config.ts (Astro Content Collections)
  - pages (data)
  - posts (content): title, description (≤160), date, tags[], lang, optional cover
  - cases (content): title, description (≤160), sector?, date, cover, results[], gallery[], lang

- Content samples
  - posts/
    - 2025‑01‑01‑checklist‑nieuwe‑website‑wageningen.md
    - 2025‑01‑10‑wat‑kost‑een‑website‑in‑2025.md
  - cases/
    - 2024‑10‑10‑mkb‑website.md

- Routes (NL implemented, EN prepared)
  - /index.astro — gateway (x‑default)
  - /nl/… pages and templates
  - /en/index.astro — prepared, noindex until go‑live
  - Custom 404 at /404.astro (NL/EN messaging based on path prefix)


## 3) Decap CMS

Admin
- /admin/ loads Decap CMS app

Config
- public/admin/config.yml
  - backend: github
  - repo: Twinpixel-nl/Twinpixel-Reborn
  - branch: main
  - publish_mode: editorial_workflow
  - media_folder: public/uploads
  - public_folder: /uploads
  - collections:
    - posts (Markdown, slug: {{year}}-{{month}}-{{day}}-{{slug}})
      - title (string, required)
      - description (text, required, ≤160)
      - date (datetime, required)
      - tags (list)
      - lang (select: nl|en, default nl)
      - body (markdown, required)

GitHub OAuth (required for production)
- Decap GitHub backend requires an auth server. Options:
  - Use Decap’s GitHub backend with your own auth (see https://decapcms.org/docs/authentication/#github)
  - Or host a simple OAuth backend (Netlify/Hosted options).
- After configuring the OAuth endpoint, update config.yml accordingly (base_url or other provider‑specific fields).
- Editorial workflow is enabled (draft → review → publish).

Local development notes
- For local test without auth you can use the GitHub backend with a personal access token via proxy server, or temporarily switch to `local_backend: true` (only for local content prototyping; do not use in production).


## 4) SEO & i18n

SEO
- Per page: unique title (≤60), meta description (140–160), OG meta, canonical
- OG images: add real 1200×630 assets under /public/uploads or /public/images and set per page/post

Hreflang
- NL live (nl‑NL) — all /nl/ routes emit hreflang
- EN prepared (en‑GB) — keep EN pages noindex until launch
- Root gateway has x‑default

Sitemap & robots
- Sitemap generated by @astrojs/sitemap (at build)
- robots.txt Disallow: /admin/, link to sitemap index
- Until EN launch, EN is excluded from sitemap (see astro.config.mjs filter)

Redirects
- Netlify: public/_redirects includes .html → NL mappings and wildcard /*.html → /nl/
- Vercel: vercel.json mirrors the redirects and sets X‑Robots‑Tag: noindex on /admin/*

Breadcrumbs & Structured Data (LD+JSON)
- Implemented where relevant:
  - WebSite/SearchAction (add when search is implemented)
  - LocalBusiness on /nl/
  - Service (+ FAQPage on /nl/diensten/)
  - CollectionPage + ItemList on portfolio index
  - CreativeWork (case detail)
  - BlogPosting (blog post)
  - BreadcrumbList on subpages

EN Go‑live checklist
- Remove noindex on EN pages
- Remove sitemap filter for /en/ in astro.config.mjs
- Add EN alternates everywhere and ensure hreflang pairs
- Verify that both NL and EN are present in final sitemap(s)


## 5) Performance

- Minimal JS footprint; mostly static pages
- Tailwind v4, no icon CDNs, inline SVG
- Images: use AVIF/WEBP; add width/height; lazy by default (hero eager)
- Preload critical font(s) and hero image
  - Replace commented preload tags in BaseLayout with real assets
- Reduced‑motion support in CSS
- Targets:
  - LCP < 1.5s, CLS < 0.03, TBT < 100ms
  - Lighthouse Mobile ≥ 95, Desktop ≥ 98

Testing
- Use PageSpeed Insights or Lighthouse in Chrome
- Test routes: /, /nl/, /nl/diensten/, /nl/prijzen/, /nl/portfolio/, a case detail, /nl/blog/, a blog post
- Rich Results Test: ensure 0 errors for structured data

Accessibility
- Visible focus states
- Keyboard navigation
- Alt text on images
- Contrast AA via theme
- Text measure ~≤80ch (.prose utility)


## 6) Content authoring

Posts (Decap managed)
- location: src/content/posts/
- frontmatter fields:
  - title (string)
  - description (string ≤ 160)
  - date (datetime)
  - tags (list of strings)
  - lang (nl|en)
- body (Markdown)

Cases
- location: src/content/cases/
- fields:
  - title, description (≤160), sector?, date, cover?, results[], gallery[], lang
- body structure suggestion: “Probleem → Aanpak → Resultaat”

Pages data
- location: src/content/pages/ (for future i18n metadata or static data)
- zod schema present for future extension


## 7) i18n implementation details

- Primary language NL under /nl/
- EN exists under /en/ but noindexed until launch
- Root / is a gateway (200) with links to /nl/ and /en/, x‑default set
- Sitemap excludes EN until launch (astro.config.mjs → change when launching EN)
- All canonical URLs use trailing slash style


## 8) Deployment

Netlify
- Uses public/_redirects automatically (no extra cfg)
- Set env vars (PUBLIC_GA4_ID) in Netlify dashboard
- Build command: npm run build
- Publish directory: dist

Vercel
- vercel.json already configured (redirects + headers + trailingSlash)
- Set env vars (PUBLIC_GA4_ID) in Vercel project
- Framework preset: Astro
- Output directory: dist

GitHub Pages or other static hosts
- Ensure trailing slash support or rewrite rules
- Upload /dist


## 9) Roadmap / TODO

Required before public launch
- Replace placeholder favicon, add real OG images per page
- Add local fonts (subset, self‑hosted) + preload; set font-display: swap
- Add hero image(s) and preload on applicable pages
- Validate structured data with Rich Results Test (0 errors)
- Run Lighthouse & PSI, tune LCP/CLS/TBT
- Add contact NAP details in footer for Local SEO
- Confirm GA4 ID (PUBLIC_GA4_ID) and privacy statement

Optional improvements
- Add Decap preview templates (lightweight)
- Add sitemap transform for updated priorities if needed
- Add RSS for blog if desired
- Add search (then add WebSite + SearchAction schema)
- Expand EN routes (services, pricing, portfolio, blog, about, contact)

Administrative
- When EN goes live:
  - Remove noindex on EN
  - Remove sitemap filter for /en/
  - Ensure hreflang pairs everywhere (NL↔EN)
  - Re‑run SEO and schema validation

Screens / Validation (attach when available)
- Add Lighthouse (mobile/desktop) screenshots
- Add Rich Results validation screenshot


## 10) Developer notes

- GA4 snippet only renders when PUBLIC_GA4_ID is set
- Tailwind classes and utilities live in `src/styles/tailwind.css`
- Inline SVG only; no icon CDNs
- Keep animations subtle and respect `prefers-reduced-motion`
- Keep static pages zero‑JS where possible

By design, this codebase adheres to the brief: modern, minimal UI, strong performance defaults, clean URLs, strict i18n, structured data, and a straightforward Decap CMS setup with editorial workflow.

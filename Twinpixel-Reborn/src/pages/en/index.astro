---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const site = Astro.site?.toString().replace(/\/$/, "") ?? "";

// Fetch 2 latest EN blog posts (if any)
const posts = (await getCollection("posts", ({ data }) => data.lang === "en"))
  .sort((a, b) => +new Date(b.data.date) - +new Date(a.data.date))
  .slice(0, 2);

// Prepared: keep EN on noindex until launch
const noindex = true;

const jsonLd = [
  {
    "@context": "https://schema.org",
    "@type": "CollectionPage",
    "name": "TwinPixel",
    "url": `${site}/en/`
  }
];
---

<BaseLayout
  title="Web design in Wageningen | TwinPixel"
  description="We build fast, professional websites that convert. Minimal, focused, and clear."
  lang="en"
  canonical="/en/"
  alternates={{ nl: `${site}/nl/`, en: `${site}/en/` }}
  xDefaultAlternate="/"
  transparentHeader={true}
  noindex={noindex}
  jsonLd={jsonLd}
>
  <!-- Hero -->
  <section class="relative isolate overflow-hidden">
    <picture>
      <source
        type="image/avif"
        srcset="/images/hero-1920.avif 1920w, /images/hero-1280.avif 1280w"
        sizes="(min-width: 1024px) 100vw, 100vw" />
      <source
        type="image/webp"
        srcset="/images/hero-1920.webp 1920w, /images/hero-1280.webp 1280w"
        sizes="(min-width: 1024px) 100vw, 100vw" />
      <img
        src="/images/hero-1280.webp"
        alt="Twan and colleague discussing website code at TwinPixel"
        width="1920"
        height="1080"
        class="w-full h-[60vh] md:h-[70vh] object-cover"
        loading="eager"
        decoding="async"
        fetchpriority="high" />
    </picture>
    <div class="absolute inset-0 bg-gradient-to-t from-slate-950/70 to-slate-900/10"></div>

    <div class="container relative z-10 py-16 md:py-24">
      <h1 class="text-4xl md:text-5xl font-semibold tracking-tight">Web design in Wageningen</h1>
      <p class="prose mt-4 text-slate-200">
        We create fast, professional websites for small businesses. Minimal, accessible, and focused on results â€” without noise.
      </p>
      <div class="mt-6 flex flex-wrap gap-3">
        <a href="/en/contact/" class="btn-primary" aria-label="Request a quote">Request a quote</a>
        <a href="/en/pricing/" class="underline underline-offset-4 decoration-slate-600 hover:text-cyan-400">See pricing</a>
      </div>
    </div>
  </section>

  <!-- Services preview -->
  <section class="section">
    <h2 class="text-2xl md:text-3xl font-semibold mb-6">Services</h2>
    <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
      <a href="/en/services/" class="block rounded-lg border border-slate-800/60 p-5 hover:border-cyan-700 transition-colors">
        <h3 class="text-lg font-medium">Web design</h3>
        <p class="text-slate-400 mt-2">Minimal, accessible, and focused on clarity and conversion.</p>
      </a>
      <a href="/en/services/" class="block rounded-lg border border-slate-800/60 p-5 hover:border-cyan-700 transition-colors">
        <h3 class="text-lg font-medium">SEO</h3>
        <p class="text-slate-400 mt-2">Technical SEO and content fundamentals. Clean URLs and internal links.</p>
      </a>
      <a href="/en/services/" class="block rounded-lg border border-slate-800/60 p-5 hover:border-cyan-700 transition-colors">
        <h3 class="text-lg font-medium">Hosting & care</h3>
        <p class="text-slate-400 mt-2">Secure hosting and updates. Predictable, reliable.</p>
      </a>
    </div>
  </section>

  <!-- Blog teasers -->
  <section class="section">
    <h2 class="text-2xl md:text-3xl font-semibold mb-6">Blog</h2>
    <div class="grid gap-4 sm:grid-cols-2">
      {posts.length === 0 && (
        <p class="text-slate-400">English articles will be available at launch.</p>
      )}
      {posts.map((post) => (
        <a href={`/en/blog/${post.slug}/`} class="block rounded-lg border border-slate-800/60 p-5 hover:border-cyan-700 transition-colors">
          <h3 class="text-lg font-medium">{post.data.title}</h3>
          {post.data.description && <p class="text-slate-400 mt-2">{post.data.description}</p>}
          <p class="text-slate-500 text-sm mt-3">{new Date(post.data.date).toLocaleDateString("en-GB")}</p>
        </a>
      ))}
    </div>
  </section>
</BaseLayout>

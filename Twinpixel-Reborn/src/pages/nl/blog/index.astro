---
import BaseLayout from "../../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const site = Astro.site?.toString().replace(/\/$/, "") ?? "";

const posts = (await getCollection("posts", ({ data }) => data.lang === "nl"))
  .sort((a, b) => +new Date(b.data.date) - +new Date(a.data.date));

const jsonLd = [
  {
    "@context": "https://schema.org",
    "@type": "CollectionPage",
    "name": "Blog | TwinPixel",
    "url": `${site}/nl/blog/`,
  },
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "Home",
        "item": `${site}/nl/`
      },
      {
        "@type": "ListItem",
        "position": 2,
        "name": "Blog",
        "item": `${site}/nl/blog/`
      }
    ]
  }
];
---

<BaseLayout
  title="Blog | TwinPixel"
  description="Artikelen over webdesign, SEO en website-onderhoud. Kort, concreet en toepasbaar."
  lang="nl"
  canonical="/nl/blog/"
  alternates={{ nl: `${site}/nl/blog/` }}
  jsonLd={jsonLd}
>
  <section class="section">
    <h1 class="text-3xl md:text-4xl font-semibold mb-6">Blog</h1>
    <div class="grid gap-4 sm:grid-cols-2">
      {posts.length === 0 && (
        <p class="text-slate-400">Binnenkort vind je hier artikelen over webdesign, SEO en onderhoud.</p>
      )}
      {posts.map((post) => (
        <a href={`/nl/blog/${post.slug}/`} class="block rounded-lg border border-slate-800/60 p-5 hover:border-cyan-700 transition-colors">
          <h2 class="text-lg font-medium">{post.data.title}</h2>
          {post.data.description && <p class="text-slate-400 mt-2">{post.data.description}</p>}
          <p class="text-slate-500 text-sm mt-3">{new Date(post.data.date).toLocaleDateString("nl-NL")}</p>
        </a>
      ))}
    </div>
  </section>
</BaseLayout>

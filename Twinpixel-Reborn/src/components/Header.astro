---
import LanguageSwitcher from "./LanguageSwitcher.astro";
import { pathFor } from "../lib/paths";

type Lang = "nl" | "en";
interface Props {
  transparentHeader?: boolean;
}
const { transparentHeader = false } = Astro.props as Props;

const pathname = Astro.url.pathname;
const currentLang: Lang = pathname.startsWith("/en/") ? "en" : "nl";
const homeHref = `/${currentLang}/`;

const navLinks =
  currentLang === "nl"
    ? [
        { href: pathFor("nl", "portfolio"), label: "Portfolio" },
        { href: pathFor("nl", "prijzen"), label: "Prijzen" },
        { href: pathFor("nl", "over"), label: "Over" },
        { href: pathFor("nl", "blog"), label: "Blog" },
      ]
    : [
        { href: pathFor("en", "portfolio"), label: "Portfolio" },
        { href: pathFor("en", "pricing"), label: "Pricing" },
        { href: pathFor("en", "about"), label: "About" },
        { href: pathFor("en", "blog"), label: "Blog" },
      ];

const isActive = (href: string) => pathname.startsWith(href);
---

/
<header
  id="site-header"
  class={transparentHeader
    ? "fixed top-0 inset-x-0 z-40 border-b border-transparent bg-transparent backdrop-blur [&.is-solid]:bg-slate-900/90 [&.is-solid]:border-slate-800/60"
    : "sticky top-0 z-40 border-b border-slate-800/60 bg-slate-900/90 backdrop-blur"}
>
  <nav class="container flex items-center justify-between py-3" aria-label="Primary">
    <a href={homeHref} class="inline-flex items-center gap-2" aria-label="TwinPixel home">
      <img
        src="/logo.svg"
        alt="TwinPixel logo"
        width="128"
        height="32"
        class="h-8 w-auto"
        loading="eager"
        decoding="async"
      />
    </a>

    <ul class="hidden md:flex items-center gap-6">
      {navLinks.map((link) => (
        <li>
          <a
            class="hover:text-cyan-400"
            href={link.href}
            aria-current={isActive(link.href) ? "page" : undefined}
          >
            {link.label}
          </a>
        </li>
      ))}
    </ul>

    <div class="flex items-center gap-3">
      <LanguageSwitcher />
    </div>
  </nav>
</header>
